tweet_json <- "{\"created_at\":\"Sun Nov 03 04:51:53 +0000 2019\",\"id\":1190854083718131712,\"id_str\":\"1190854083718131712\",\"text\":\"One of the greatest fights ever assembled somehow ends in disappointment. New York state athletic commission is the worst. #UFC244\",\"source\":\"\\u003ca href=\\\"http:\\/\\/twitter.com\\/download\\/android\\\" rel=\\\"nofollow\\\"\\u003eTwitter for Android\\u003c\\/a\\u003e\",\"truncated\":false,\"in_reply_to_status_id\":null,\"in_reply_to_status_id_str\":null,\"in_reply_to_user_id\":null,\"in_reply_to_user_id_str\":null,\"in_reply_to_screen_name\":null,\"user\":{\"id\":341609398,\"id_str\":\"341609398\",\"name\":\"Allen Strk\",\"screen_name\":\"Allen_Strk\",\"location\":\"New York, NY\",\"url\":null,\"description\":\"Covering the Atlanta Falcons for @TheFalcoholic | Co-host, @VeteransMinimum | Former Marketing Copywriter, @Billboard |  astrk19@gmail.com\",\"translator_type\":\"none\",\"protected\":false,\"verified\":false,\"followers_count\":4769,\"friends_count\":548,\"listed_count\":128,\"favourites_count\":1405,\"statuses_count\":89923,\"created_at\":\"Sun Jul 24 17:12:47 +0000 2011\",\"utc_offset\":null,\"time_zone\":null,\"geo_enabled\":true,\"lang\":null,\"contributors_enabled\":false,\"is_translator\":false,\"profile_background_color\":\"89C9FA\",\"profile_background_image_url\":\"http:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\"profile_background_image_url_https\":\"https:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\"profile_background_tile\":true,\"profile_link_color\":\"9266CC\",\"profile_sidebar_border_color\":\"FFFFFF\",\"profile_sidebar_fill_color\":\"DDEEF6\",\"profile_text_color\":\"0084B4\",\"profile_use_background_image\":false,\"profile_image_url\":\"http:\\/\\/pbs.twimg.com\\/profile_images\\/1154769079321989121\\/bnuvY-En_normal.jpg\",\"profile_image_url_https\":\"https:\\/\\/pbs.twimg.com\\/profile_images\\/1154769079321989121\\/bnuvY-En_normal.jpg\",\"profile_banner_url\":\"https:\\/\\/pbs.twimg.com\\/profile_banners\\/341609398\\/1531749328\",\"default_profile\":false,\"default_profile_image\":false,\"following\":null,\"follow_request_sent\":null,\"notifications\":null},\"geo\":null,\"coordinates\":null,\"place\":{\"id\":\"01a9a39529b27f36\",\"url\":\"https:\\/\\/api.twitter.com\\/1.1\\/geo\\/id\\/01a9a39529b27f36.json\",\"place_type\":\"city\",\"name\":\"Manhattan\",\"full_name\":\"Manhattan, NY\",\"country_code\":\"US\",\"country\":\"United States\",\"bounding_box\":{\"type\":\"Polygon\",\"coordinates\":[[[-74.026675,40.683935],[-74.026675,40.877483],[-73.910408,40.877483],[-73.910408,40.683935]]]},\"attributes\":{}},\"contributors\":null,\"is_quote_status\":false,\"quote_count\":0,\"reply_count\":0,\"retweet_count\":0,\"favorite_count\":0,\"entities\":{\"hashtags\":[{\"text\":\"UFC244\",\"indices\":[123,130]}],\"urls\":[],\"user_mentions\":[],\"symbols\":[]},\"favorited\":false,\"retweeted\":false,\"filter_level\":\"low\",\"lang\":\"en\",\"timestamp_ms\":\"1572756713214\"}"

int64_double <- list(
  created_at = "Sun Nov 03 04:51:53 +0000 2019",
  id = 1190854083718131712,
  id_str = "1190854083718131712",
  text = "One of the greatest fights ever assembled somehow ends in disappointment. New York state athletic commission is the worst. #UFC244",
  source = "<a href=\"http://twitter.com/download/android\" rel=\"nofollow\">Twitter for Android</a>",
  truncated = FALSE,
  in_reply_to_status_id = NULL,
  in_reply_to_status_id_str = NULL,
  in_reply_to_user_id = NULL,
  in_reply_to_user_id_str = NULL,
  in_reply_to_screen_name = NULL,
  user = list(
    id = 341609398L,
    id_str = "341609398",
    name = "Allen Strk",
    screen_name = "Allen_Strk",
    location = "New York, NY",
    url = NULL,
    description = "Covering the Atlanta Falcons for @TheFalcoholic | Co-host, @VeteransMinimum | Former Marketing Copywriter, @Billboard |  astrk19@gmail.com",
    translator_type = "none",
    protected = FALSE,
    verified = FALSE,
    followers_count = 4769L,
    friends_count = 548L,
    listed_count = 128L,
    favourites_count = 1405L,
    statuses_count = 89923L,
    created_at = "Sun Jul 24 17:12:47 +0000 2011",
    utc_offset = NULL,
    time_zone = NULL,
    geo_enabled = TRUE,
    lang = NULL,
    contributors_enabled = FALSE,
    is_translator = FALSE,
    profile_background_color = "89C9FA",
    profile_background_image_url = "http://abs.twimg.com/images/themes/theme1/bg.png",
    profile_background_image_url_https = "https://abs.twimg.com/images/themes/theme1/bg.png",
    profile_background_tile = TRUE,
    profile_link_color = "9266CC",
    profile_sidebar_border_color = "FFFFFF",
    profile_sidebar_fill_color = "DDEEF6",
    profile_text_color = "0084B4",
    profile_use_background_image = FALSE,
    profile_image_url = "http://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
    profile_image_url_https = "https://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
    profile_banner_url = "https://pbs.twimg.com/profile_banners/341609398/1531749328",
    default_profile = FALSE,
    default_profile_image = FALSE,

    following = NULL,
    follow_request_sent = NULL,
    notifications = NULL
  ),
  geo = NULL,
  coordinates = NULL,
  place = list(
    id = "01a9a39529b27f36",
    url = "https://api.twitter.com/1.1/geo/id/01a9a39529b27f36.json",
    place_type = "city",
    name = "Manhattan",
    full_name = "Manhattan, NY",
    country_code = "US",
    country = "United States",
    bounding_box = list(type = "Polygon", coordinates = list(list(
      list(
        -74.026675,
        40.683935
      ),
      list(-74.026675, 40.877483),
      list(-73.910408, 40.877483),
      list(-73.910408, 40.683935)
    ))),
    attributes = structure(list(), .Names = character(0))
  ),
  contributors = NULL,
  is_quote_status = FALSE,
  quote_count = 0L,
  reply_count = 0L,
  retweet_count = 0L,
  favorite_count = 0L,
  entities = list(
    hashtags = list(list(
      text = "UFC244", indices = list(123L, 130L)
    )),
    urls = list(),
    user_mentions = list(),
    symbols = list()
  ),
  favorited = FALSE,
  retweeted = FALSE,
  filter_level = "low",
  lang = "en",
  timestamp_ms = "1572756713214"
)

int64_string <-
  list(
    created_at = "Sun Nov 03 04:51:53 +0000 2019",
    id = "1190854083718131712",
    id_str = "1190854083718131712",
    text = "One of the greatest fights ever assembled somehow ends in disappointment. New York state athletic commission is the worst. #UFC244",
    source = "<a href=\"http://twitter.com/download/android\" rel=\"nofollow\">Twitter for Android</a>",
    truncated = FALSE,
    in_reply_to_status_id = NULL,
    in_reply_to_status_id_str = NULL,
    in_reply_to_user_id = NULL,
    in_reply_to_user_id_str = NULL,
    in_reply_to_screen_name = NULL,
    user = list(
      id = 341609398L,
      id_str = "341609398",
      name = "Allen Strk",
      screen_name = "Allen_Strk",
      location = "New York, NY",
      url = NULL,
      description = "Covering the Atlanta Falcons for @TheFalcoholic | Co-host, @VeteransMinimum | Former Marketing Copywriter, @Billboard |  astrk19@gmail.com",
      translator_type = "none",
      protected = FALSE,
      verified = FALSE,
      followers_count = 4769L,
      friends_count = 548L,
      listed_count = 128L,
      favourites_count = 1405L,
      statuses_count = 89923L,
      created_at = "Sun Jul 24 17:12:47 +0000 2011",
      utc_offset = NULL,
      time_zone = NULL,
      geo_enabled = TRUE,
      lang = NULL,
      contributors_enabled = FALSE,
      is_translator = FALSE,
      profile_background_color = "89C9FA",
      profile_background_image_url = "http://abs.twimg.com/images/themes/theme1/bg.png",
      profile_background_image_url_https = "https://abs.twimg.com/images/themes/theme1/bg.png",
      profile_background_tile = TRUE,
      profile_link_color = "9266CC",
      profile_sidebar_border_color = "FFFFFF",
      profile_sidebar_fill_color = "DDEEF6",
      profile_text_color = "0084B4",
      profile_use_background_image = FALSE,
      profile_image_url = "http://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
      profile_image_url_https = "https://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
      profile_banner_url = "https://pbs.twimg.com/profile_banners/341609398/1531749328",
      default_profile = FALSE,
      default_profile_image = FALSE,
      following = NULL,
      follow_request_sent = NULL,
      notifications = NULL
    ),
    geo = NULL,
    coordinates = NULL,
    place = list(
      id = "01a9a39529b27f36",
      url = "https://api.twitter.com/1.1/geo/id/01a9a39529b27f36.json",
      place_type = "city",
      name = "Manhattan",
      full_name = "Manhattan, NY",
      country_code = "US",
      country = "United States",
      bounding_box = list(type = "Polygon", coordinates = list(list(
        list(
          -74.026675,
          40.683935
        ),
        list(-74.026675, 40.877483),
        list(-73.910408, 40.877483),
        list(-73.910408, 40.683935)
      ))),
      attributes = structure(list(), .Names = character(0))
    ),
    contributors = NULL,
    is_quote_status = FALSE,
    quote_count = 0L,
    reply_count = 0L,
    retweet_count = 0L,
    favorite_count = 0L,
    entities = list(
      hashtags = list(list(
        text = "UFC244", indices = list(123L, 130L)
      )),
      urls = list(),
      user_mentions = list(),
      symbols = list()
    ),
    favorited = FALSE,
    retweeted = FALSE,
    filter_level = "low",
    lang = "en",
    timestamp_ms = "1572756713214"
  )

int64_bit64_integer64 <-
  list(
    created_at = "Sun Nov 03 04:51:53 +0000 2019",
    id = structure(4.6919579836104e-229, class = "integer64"),
    id_str = "1190854083718131712",
    text = "One of the greatest fights ever assembled somehow ends in disappointment. New York state athletic commission is the worst. #UFC244",
    source = "<a href=\"http://twitter.com/download/android\" rel=\"nofollow\">Twitter for Android</a>",
    truncated = FALSE,
    in_reply_to_status_id = NULL,
    in_reply_to_status_id_str = NULL,
    in_reply_to_user_id = NULL,
    in_reply_to_user_id_str = NULL,
    in_reply_to_screen_name = NULL,
    user = list(
      id = 341609398L,
      id_str = "341609398",
      name = "Allen Strk",
      screen_name = "Allen_Strk",
      location = "New York, NY",
      url = NULL,
      description = "Covering the Atlanta Falcons for @TheFalcoholic | Co-host, @VeteransMinimum | Former Marketing Copywriter, @Billboard |  astrk19@gmail.com",
      translator_type = "none",
      protected = FALSE,
      verified = FALSE,
      followers_count = 4769L,
      friends_count = 548L,
      listed_count = 128L,
      favourites_count = 1405L,
      statuses_count = 89923L,
      created_at = "Sun Jul 24 17:12:47 +0000 2011",
      utc_offset = NULL,
      time_zone = NULL,
      geo_enabled = TRUE,
      lang = NULL,
      contributors_enabled = FALSE,
      is_translator = FALSE,
      profile_background_color = "89C9FA",
      profile_background_image_url = "http://abs.twimg.com/images/themes/theme1/bg.png",
      profile_background_image_url_https = "https://abs.twimg.com/images/themes/theme1/bg.png",
      profile_background_tile = TRUE,
      profile_link_color = "9266CC",
      profile_sidebar_border_color = "FFFFFF",
      profile_sidebar_fill_color = "DDEEF6",
      profile_text_color = "0084B4",
      profile_use_background_image = FALSE,
      profile_image_url = "http://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
      profile_image_url_https = "https://pbs.twimg.com/profile_images/1154769079321989121/bnuvY-En_normal.jpg",
      profile_banner_url = "https://pbs.twimg.com/profile_banners/341609398/1531749328",
      default_profile = FALSE,
      default_profile_image = FALSE,
      following = NULL,
      follow_request_sent = NULL,
      notifications = NULL
    ),
    geo = NULL,
    coordinates = NULL,
    place = list(
      id = "01a9a39529b27f36",
      url = "https://api.twitter.com/1.1/geo/id/01a9a39529b27f36.json",
      place_type = "city",
      name = "Manhattan",
      full_name = "Manhattan, NY",
      country_code = "US",
      country = "United States",
      bounding_box = list(type = "Polygon", coordinates = list(list(
        list(
          -74.026675,
          40.683935
        ),
        list(-74.026675, 40.877483),
        list(-73.910408, 40.877483),
        list(-73.910408, 40.683935)
      ))),
      attributes = structure(list(), .Names = character(0))
    ),
    contributors = NULL,
    is_quote_status = FALSE,
    quote_count = 0L,
    reply_count = 0L,
    retweet_count = 0L,
    favorite_count = 0L,
    entities = list(
      hashtags = list(list(
        text = "UFC244", indices = list(123L, 130L)
      )),
      urls = list(),
      user_mentions = list(),
      symbols = list()
    ),
    favorited = FALSE,
    retweeted = FALSE,
    filter_level = "low",
    lang = "en",
    timestamp_ms = "1572756713214"
  )

expect_identical(
  RcppSimdJson:::.parse_json(tweet_json, int64_T = 0),
  int64_double
)

expect_identical(
  RcppSimdJson:::.parse_json(tweet_json, int64_T = 1),
  int64_string
)

expect_equal(
  RcppSimdJson:::.parse_json(tweet_json, int64_T = 2),
  int64_bit64_integer64, tolerance = 10e-9
)
